<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>throwing_ptr: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">throwing_ptr
   </div>
   <div id="projectbrief">Smart pointers that throw on dereference if null</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">throwing_ptr Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/rockdreamer/throwing_ptr"></a> <a href="https://ci.appveyor.com/project/rockdreamer/throwing-ptr"></a></p>
<h1>Throwing smart pointers</h1>
<p>A header only library wrapping <a href="http://en.cppreference.com/w/cpp/memory/shared_ptr">std::shared_ptr</a> and <a href="http://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a> that throws an exception when a wrapped null pointer is dereferenced</p>
<h2>Rationale</h2>
<p>Dereferencing a null standard smart pointer is undefined behaviour, probably leading to a program crash. This library aims to fully replicate the behaviour of the wrapped standard smart pointers with the exception (sic) that an exception will be thrown when the -&gt;, * and [] operators are called. Such exceptions can be caught and handled in an application specific manner (for example by showing an error pop up)</p>
<p>Situations where this library may be useful:</p><ul>
<li>Legacy code that used a custom smart pointer class which threw on dereference: this library provides a gradual path towards moving to the standard smart pointers. Such code may depend on the throwing behaviour, making a direct migration bug prone.</li>
<li>Programs where resilience to null dereference bugs is important, such as GUIs</li>
</ul>
<p>There is an obvious cost to using this library in that every dereference will add a branch. In these cases the library exposes the underlying standard smart pointer and the user may opt to use that in hot code paths where attention has been taken not to dereference null pointers.</p>
<h2>Design decisions</h2>
<p>The library relies on the underlying implementation of std::shared_ptr and std::unique_ptr for all functionality, including participation in overload resolution. While this exposes users to slight differences in behaviour across platforms and compilers, the upside is that it's easier to give access to the stored std pointers and when the user decides to no longer rely on these classes and move to the std implementations, they will get less surprising results.</p>
<p>Exceptions are <a class="el" href="namespacethrowing.html#a3b16a5f9ca990313f55d3e7e97f5f6ce" title="Constructs an object of non-array type T and wraps it in a throwing::unique_ptr using args as the par...">throwing::make_unique</a> and throwing::unique_ptr::operator&lt;&lt; which are provided by the implementation.</p>
<h2>Using the library</h2>
<h3>Accessing the functionality</h3>
<p>throwing_ptr is a header-only library. You can copy the include throwing_ptr folder in your source code or add the include directory in your include path and start using it right away.</p>
<h3>Examples</h3>
<p>Example use 1: </p><div class="fragment"><div class="line">{c++}</div><div class="line">#include &lt;throwing/shared_ptr.hpp&gt;</div><div class="line">auto pointer = throwing::make_shared&lt;int&gt;();</div></div><!-- fragment --><p>Example use 2: </p><div class="fragment"><div class="line">{c++}</div><div class="line">#include &lt;throwing/unique_ptr.hpp&gt;</div><div class="line">auto pointer = throwing::make_unique&lt;SomeClass&gt;(some_parameter);</div></div><!-- fragment --><p>Example use 3 (exception handling): </p><div class="fragment"><div class="line">{c++}</div><div class="line">#include &lt;throwing/unique_ptr.hpp&gt;</div><div class="line"></div><div class="line">// Initialise a null pointer</div><div class="line">throwing::unique_ptr&lt;int&gt; null_int_ptr; </div><div class="line">auto non_null_float_ptr = throwing::make_unique&lt;float&gt;(0);</div><div class="line">try {</div><div class="line">    *non_null_float_ptr;</div><div class="line">    (*null_int_ptr)++; // dereference of null pointer, throws exception</div><div class="line">} catch (const throwing::null_ptr_exception&lt;float&gt; &amp;) {</div><div class="line">    // It is possible to handle exceptions differently based on the</div><div class="line">    // type of object handled by the pointer</div><div class="line">    // This block will not be called as it only catches</div><div class="line">    // dereferences of int pointers</div><div class="line">} catch (const throwing::base_null_ptr_exception &amp;e) {</div><div class="line">    // what() returns a generic message</div><div class="line">    std::cout &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">    // what_type() returns platform-specific message</div><div class="line">    // indicating the type</div><div class="line">    std::cout &lt;&lt; e.what_type() &lt;&lt; std::endl; </div><div class="line">}</div></div><!-- fragment --><h2>Testing the library</h2>
<p>The library comes with a thorough unit testing suite, based on <a href="https://github.com/catchorg/Catch2">catch 1.9</a>, <a href="http://www.cmake.org">CMake</a> and <a href="https://conan.io">Conan.io</a>.</p>
<p>To run it, install cmake and conan and build the package for your environment.</p>
<h2>Documentation</h2>
<p>All methods have doxygen documentation, largely based on the high quality documentation of the standard library from <a href="http://en.cppreference.com">cppreference</a></p>
<h2>License</h2>
<p>The library is distributed under the Boost Software License, Version 1.0.</p>
<p>The documentation is licensed under Creative Commons Attribution-Sharealike 3.0 Unported License (CC-BY-SA) and by the GNU Free Documentation License (GFDL) (unversioned, with no invariant sections,front-cover texts, or back-cover texts).</p>
<h2>Further reading</h2>
<ul>
<li>Customising std::shared_ptr or boost::shared_ptr to throw an exception on NULL dereference on <a href="https://stackoverflow.com/questions/12452565/customising-stdshared-ptr-or-boostshared-ptr-to-throw-an-exception-on-null-d?rq=1">Stack Overflow</a></li>
<li>How to make shared_ptr wrapper class work with make_shared on <a href="https://stackoverflow.com/questions/29074577/how-to-make-shared-ptr-wrapper-class-work-with-make-shared?noredirect=1&amp;lq=1">Stack Overflow</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
